spring:
  application:
    name: fitpub-test

  # Testcontainers will automatically configure the datasource
  datasource:
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    url: jdbc:tc:postgis:13-3.1:///testdb?TC_INITSCRIPT=file:src/test/resources/init-test-db.sql

  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.spatial.dialect.postgis.PostgisPG10Dialect
        format_sql: true
    show-sql: false

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB

fitpub:
  domain: localhost:8080
  base-url: http://localhost:8080
  activitypub:
    enabled: true
    max-federation-retries: 3
  security:
    jwt:
      secret: test-secret-key-for-jwt-token-generation-in-tests-must-be-long-enough
      expiration: 86400000 # 24 hours
  storage:
    fit-files:
      path: ${java.io.tmpdir}/fitpub-test/fit-files
      retention-days: 365
  weather:
    enabled: false
    api-key: test-api-key

logging:
  level:
    org.operaton.fitpub: DEBUG
    org.springframework: WARN
    org.hibernate: WARN
    org.testcontainers: INFO
